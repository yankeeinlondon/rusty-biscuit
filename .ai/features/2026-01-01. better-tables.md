# Better Tables

We do have some rendering for our Markdown tables in the terminal but it's home grown and missing important features. In order to improve the quality of our tables we will switch to using [`comfy-table`](https://github.com/nukesor/comfy-table) for table rendering in the terminal.

> Note: this feature/plan/implementation have nothing to do with how we render tables in HTML; only for the terminal.

**IMPORTANT: you must use the `comfy-table` skill whenever you are working with tables in the terminal.

## Features

1. Column Alignment

    - We will use the line under the headers to determine column alignment
    - `------` is left justified
    - `:-----` is also left justified
    - `:-----:` is centered
    - `------:` is right justified

2. Links, Colors, and other escape codes do not throw off column alignment

    - this SHOULD be a non issue based on the reporting I have
    - however OSC links are sometimes "the last mile" that hasn't been sorted yet

3. Fixed Width

    - It's ok for the table to grow in width to accommodate wider content, but
    - we need a way to ensure that the table will NOT grow wider than the number of available columns
    - We should be able to use `terminal_width` to get the max width and I believe the `ColumnConstraint` in **comfy-table** will allow us to constrain columns to fit.

## Look and Feel

The popular `mdcat` program renders tables like this:

![mdcat table](table.png)

And here's a larger width table:

![larger table](larger-table.png)


 This is a pretty minimalist look but as you can see they have got the alignment feature down and "minimalism" is a good thing in the terminal. 
 
 My biggest concern is the lack of clear row based separation but I think if we can get these three featured implemented in a solid manner then that will be good enough for now.



## Example: setting table width

```rust
use terminal_size::{Width, terminal_size};

// ... inside your function ...

// terminal_size() returns Option<(Width, Height)>
// Width is a tuple struct containing a u16, so we access it via .0
table.set_width(
    terminal_size()
        .map(|(Width(w), _)| w) 
        .unwrap_or(80)
);

table.set_content_arrangement(comfy_table::ContentArrangement::Dynamic);
```

### Commentary

1. **Type Handling:**
    - **`terminal_size`** returns `(Width, Height)`, where `Width` is a newtype wrapper `struct Width(pub u16)`.
2. **Pattern Matching:** We destructure the tuple `(Width(w), _)` to get the raw `u16` value `w`.

### Dependency
Make sure your `Cargo.toml` uses:

```toml
[dependencies]
comfy-table = "7"
terminal_size = "0.3"
```
