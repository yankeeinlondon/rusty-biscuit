---
status: "d1-clarify"
started_at: 10:15:00
finished_at:
duration:
tts_gender: male
requirements:
  Add Roo Code skill symlinks to the research link command. Roo Code uses ~/.roo/skills/{name}/SKILL.md directory format. Should work identically to existing Claude Code and Opencode linking - creating symlinks and cleaning up broken/invalid symlinks.
context_budget:
  estimated_pct: 25
  complexity: simple
  checkpoints: {}
required_skills:
  - rust
  - rust-testing
  - thiserror
important_skills:
  tracing: "if adding instrumentation"
subagents:
  recommended: 2-agent parallel execution
  agent1: "Type System & Detection (types.rs + detection.rs)"
  agent2: "Integration & Testing (mod.rs + format.rs + tests)"
monorepo_modules_impacted:
  - research/cli
  - research/lib
risks:
  high: 0
  medium: 0
  low: 0
lessons_learned_count: 0
---
# Planning Process

- [x] Pre-flight Check [10:15:00]
    - [x] Catalogs validated (skills: 164 lines, agents: 32 lines)
    - [x] Directories ready
    - [x] Budget estimated: simple (~25%)
- [x] Codebase Exploration [10:15:30]
    - [x] Located link command entry point: research/cli/src/main.rs
    - [x] Located core implementation: research/lib/src/link/mod.rs
    - [x] Located symlink creation: research/lib/src/link/creation.rs
    - [x] Located detection/validation: research/lib/src/link/detection.rs
    - [x] Located types: research/lib/src/link/types.rs
    - [x] Located formatting: research/lib/src/link/format.rs
- [x] Prep Started [10:16:00]
    - [x] Identified Skills [10:16:15] - rust, rust-testing, thiserror
    - [x] Identified Subagents [10:16:15] - 2-agent parallel recommended
- [x] Prep complete [10:16:30]
- [ ] Clarify & Research [{datetime}]
    - [ ] Clarification agent returned [{datetime}]
    - [ ] User answered {N} questions [{datetime}]
    - [ ] Requirements updated [{datetime}]
- [ ] Planning Subagent [agent: **Plan**] started [{datetime}]
    - [ ] subagent skills used: **LIST**
    - [ ] Planning completed [{datetime}]
- [ ] All Pre-review Steps complete [{datetime}]
    - {%} context used (budget: {%})
- [ ] Reviews Started [{datetime}]
   - [ ] Completeness Review
   - [ ] Concurrency Review
   - [ ] Correctness Review
   - [ ] Risk Assessment
- [ ] Reviews Completed [{datetime}]
    - {%} context used (budget: {%})
- [ ] Plan Finalization started [{datetime}]
    - [ ] subagent skills used: **LIST**
    - [ ] Dependency graph generated
- [ ] Plan finalized [{datetime}]
- [ ] Final Steps
    - [ ] Lessons learned collected
    - [ ] Package research status checked
- [ ] Summary reported [{datetime}]

## Codebase Analysis

### Current Implementation Structure

The research link command currently supports two targets:
- **Claude Code**: `~/.claude/skills/{name}/` and `~/.claude/docs/{name}.md`
- **OpenCode**: `~/.config/opencode/skill/{name}/` and `~/.config/opencode/docs/{name}.md`

### Key Files to Modify

1. **research/lib/src/link/detection.rs** - Add `get_roo_skills_dir()` and `get_roo_docs_dir()` functions
2. **research/lib/src/link/types.rs** - Add `roo_skill: SkillAction` and `roo_doc: Option<SkillAction>` to `SkillLink` struct
3. **research/lib/src/link/creation.rs** - No changes needed (generic symlink creation functions)
4. **research/lib/src/link/mod.rs** - Add Roo Code linking logic parallel to Claude/OpenCode
5. **research/lib/src/link/format.rs** - Add formatting for Roo Code results
6. **research/lib/tests/link_integration_test.rs** - Add tests for Roo Code linking

### Roo Code Directory Structure

Target structure:
```
~/.roo/
├── skills/{topic-name}/      (symlink → skill/ directory)
│   └── SKILL.md
└── docs/{topic-name}.md      (symlink → deep_dive.md) [if docs are supported]
```

## Plan

{ fill in when ready }

## Dependency Graph

{ auto-generated mermaid diagram }

## Risks

> Implementation risks identified during planning with mitigation strategies.

| Level | Category | Description | Affected | Mitigation |
|-------|----------|-------------|----------|------------|

## Lessons Learned

> Discoveries about skills or memory resources that were inaccurate, incomplete, or missing.

## Package Changes

> Dependencies to be added, updated, or removed during implementation.
